ZOOKEEPER_PORT=55013
BROKER_1_PLAINTEXT_PORT=55031
BROKER_1_PLAINTEXT_HOST_PORT=55014
BROKER_2_PLAINTEXT_PORT=55032
BROKER_2_PLAINTEXT_HOST_PORT=55027
BROKER_3_PLAINTEXT_PORT=55033
BROKER_3_PLAINTEXT_HOST_PORT=55028
CONTROL_CENTER_PORT=55015
KAFKA_UI_PORT=55029
SCHMEA_REGISTRY_PORT=55030

ZOOKEEPER_CONTAINER_NAME=Reference-Kafka-ZooKeeper
BROKER_1_CONTAINER_NAME=Reference-Kafka-Broker-1
BROKER_2_CONTAINER_NAME=Reference-Kafka-Broker-2
BROKER_3_CONTAINER_NAME=Reference-Kafka-Broker-3
CONTROL_CENTER_CONTAINER_NAME=Reference-Kafka-ControlCenter
KAFKA_UI_CONTAINER_NAME=Reference-Kafka-Ui
SCHEMA_REGISTRY_CONTAINER_NAME=Reference-Kafka-Schema-Registry

PROJECT_NAME=reference_kafka

all:
	@echo init
	@echo up
	@echo down
	@echo info

info:
	@echo Kafka
	@echo 'Kafka UI: http://localhost:$(KAFKA_UI_PORT)'

init: init-env

init-env:
	@rm -f .env
	@touch .env

	@echo 'ZOOKEEPER_PORT=$(ZOOKEEPER_PORT)' >> .env
	@echo 'BROKER_1_PLAINTEXT_PORT=$(BROKER_1_PLAINTEXT_PORT)' >> .env
	@echo 'BROKER_1_PLAINTEXT_HOST_PORT=$(BROKER_1_PLAINTEXT_HOST_PORT)' >> .env
	@echo 'BROKER_2_PLAINTEXT_PORT=$(BROKER_2_PLAINTEXT_PORT)' >> .env
	@echo 'BROKER_2_PLAINTEXT_HOST_PORT=$(BROKER_2_PLAINTEXT_HOST_PORT)' >> .env
	@echo 'BROKER_3_PLAINTEXT_PORT=$(BROKER_3_PLAINTEXT_PORT)' >> .env
	@echo 'BROKER_3_PLAINTEXT_HOST_PORT=$(BROKER_3_PLAINTEXT_HOST_PORT)' >> .env
	@echo 'CONTROL_CENTER_PORT=$(CONTROL_CENTER_PORT)' >> .env
	@echo 'KAFKA_UI_PORT=$(KAFKA_UI_PORT)' >> .env
	@echo 'SCHMEA_REGISTRY_PORT=$(SCHMEA_REGISTRY_PORT)' >> .env

	@echo 'ZOOKEEPER_CONTAINER_NAME=$(ZOOKEEPER_CONTAINER_NAME)' >> .env
	@echo 'BROKER_1_CONTAINER_NAME=$(BROKER_1_CONTAINER_NAME)' >> .env
	@echo 'BROKER_2_CONTAINER_NAME=$(BROKER_2_CONTAINER_NAME)' >> .env
	@echo 'BROKER_3_CONTAINER_NAME=$(BROKER_3_CONTAINER_NAME)' >> .env
	@echo 'CONTROL_CENTER_CONTAINER_NAME=$(CONTROL_CENTER_CONTAINER_NAME)' >> .env
	@echo 'KAFKA_UI_CONTAINER_NAME=$(KAFKA_UI_CONTAINER_NAME)' >> .env
	@echo 'SCHEMA_REGISTRY_CONTAINER_NAME=$(SCHEMA_REGISTRY_CONTAINER_NAME)' >> .env

up:
	docker compose \
	--env-file .env \
	--project-name $(PROJECT_NAME) \
	up -d

down:
	docker compose \
	--env-file .env \
	--project-name $(PROJECT_NAME) \
	down
